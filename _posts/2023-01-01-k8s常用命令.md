---
layout:     post
title:      k8s快捷命令
subtitle:   k8s快捷命令
date:       2023-01-01
author:     eddie
header-img: img/home-bg-o.jpg
catalog: true
tags:
    - k8s
---

## 查询一个命名空间下的所有资源
```
kubectl api-resources --verbs=list --namespaced -o name | xargs -n 1 kubectl get --show-kind --ignore-not-found -n $NAMESPACE
```

## 列出名称空间所有pod的镜像
```
kubectl -n $NAMESPACE get pods  -o jsonpath="{.items[*].spec.containers[*].image}" |tr -s '[[:space:]]' '\n' |sort |uniq -c|awk '{print $NF}'
```

