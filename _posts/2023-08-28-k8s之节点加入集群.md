---
layout:     post
title:      k8s集群
subtitle:   从节点加入集群的命令
date:       2023-08-28
author:     eddie
header-img: img/home-bg-o.jpg
catalog: true
tags:
    - k8s
---

```
	方式一: 重新生成加入节点的命令
		 kubeadm token create --print-join-command
	
	方式二: 获取原有旧的加入集群的命令
		1. 获取主节点地址:
			kubectl cluster-info
		2.查询token
			kubeadm token list
			或者重新生成token
			kubeadm token creat
		3.获取ca证书的sha256的hash值
			openssl x509 -pubkey -in /etc/kubernetes/pki/ca.crt |openssl rsa -pubin -outform der 2>/dev/null|openssl dgst -sha256 -hex|sed 's/^.* //'
		4. 加入集群
			kubeadm join 192.168.140.150:6443 --token {token} --discovery-token-ca-cert-hash sha256:{hash值}
```  