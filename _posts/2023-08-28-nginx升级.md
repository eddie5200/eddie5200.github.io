---
layout:     post
title:      nginx升级
subtitle:   linux下的nginx的升级更新
date:       2023-08-28
author:     eddie
header-img: img/home-bg-o.jpg
catalog: true
tags:
    - nginx
---
1.查看当前nginx版本
　　nginx -V
　　并记住configure arguments: --prefix=/usr/local/nginx

2.停止当前nginx服务
　　./nginx -s stop

3.为防止配置丢失建议先备份/usr/local下的nginx文件夹　　
　　cd /usr/local
　　mv  nginx  nginx_230522

4.官网下载所需要的稳定版本的nginx：http://nginx.org/en/download.html

　　上传到服务器/usr/local下，正常解压。tar -zxvf
　　编译：
　　　	./configure --prefix=/opt/software/nginx　　（后面的值是因为：历史nginx版本有安装过模块，请用./nginx -V 检查，并在 ./configure中追加上对应参数）
　　　　make

5.备份历史版本的可执行文件nginx　　
　　mv  /usr/local/nginx/sbin/nginx  /usr/local/nginx/sbin/nginx.old

6.将新解压得到的nginx执行文件复制到/usr/local/nginx/sbin下　　
　　cd  /usr/local/nginx-1.8.1/objs
　　cp  nginx   /usr/local/nginx/sbin

7.检查配置文件是否有错　　
　　cd  /usr/local/nginx/sbin
　　nginx  -t

8.启动新版本nginx、检查nginx是否启动、访问页面　　
　　./nginx
　　ps -ef|grep nginx

9.检查版本，并且此时，nginx/conf下的配置是原配置没有覆盖和改变　　
　　nginx -V

nginx版本升级不会覆盖配置文件；以防万一升级前请先备份配置文件。



---