---
layout:     post
title:      linux常用操作
subtitle:   linux的yum源配置
date:       2020-10-22
author:     eddie
header-img: img/home-bg-o.jpg
catalog: true
tags:
    - linux
---


```
1. 网络yum源配置,
	1.备份
		mv /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.bak
	
	2.下载对应版本repo文件
		wget http://mirrors.163.com/.help/CentOS7-Base-163.repo
		mv  CentOS7-Base-163.repo  /etc/yum.repos.d/CentOS-Base.repo
		
		###yum源地址
		清华源https://mirrors.tuna.tsinghua.edu.cn/help/centos/
		网易源 http://mirrors.163.com/.help/centos.html
		阿里云源http://mirrors.aliyun.com/repo/Centos-7.repo
		中科大https://lug.ustc.edu.cn/wiki/_export/code/mirrors/help/centos?codeblock=3

	3. 清除缓存
		yum clean all # 清除系统所有的yum缓存
		yum makeacache # 生成新的yum缓存



2. 本地yum源配置，使用iso镜像

	1. 首先，创建一个目录，用于挂载 ISO 文件。例如，创建一个名为
		mkdir /mnt/iso
		
	2. 	使用 mount 命令将 ISO 文件挂载到刚创建的目录中。假设 ISO 文件的路径为 /path/to/your.iso，执行以下命令
		mount -t iso9660  -o loop /path/to/your.iso /mnt/iso
	
	3. 确保 ISO 文件已成功挂载。您可以运行以下命令来检查挂载情况：
		mount | grep /mnt/iso
	
	4.配置yum文件
		vim /etc/yum.repos.d/myiso.repo
		
		[myiso]
		name=My ISO Repository
		baseurl=file:///mnt/iso # 注意，CentOS 8 的 repomd.xml 在 AppStream/repodata/repomd.xml，此文件包含有关 YUM 软件仓库中可用软件包的元数据信息。
		enabled=1
		gpgcheck=0
		
	5. 更新缓存
		yum clearall
		yum makecache
		
		
3. 局域网共享yum源配置
	在内网时，当多台机器需要配置本地同一yum源时，我们不需要在每台服务器上单独配置并挂载镜像，
	只需要在一台服务器上配置好yum源，并通过httpd服务让其他服务器能够正常访问即可
	
	1. 安装启动httpd,如果无法使用yum可以下载httpd的rpm包
		yum install -y httpd
		systemctl start httpd    # 启动httpd
		systemctl stop firewalld #临时关闭防火墙
		systemctl status httpd  #查看httpd是否启动
		
	2.挂载镜像
		1.httpd服务的目录文件在/var/www/html下面
		2. 进入httpd服务目录，创建文件夹centosiso
		3. 将要挂载的镜像放在/mnt下面,
			mv  centosiso.iso /mnt/
			mount /mnt/centosiso.iso /var/www/html/centosiso
	3. 在浏览器访问http://localhost/centosiso/
	
	
	4. 其他服务器配置
		源去访问此台服务器

		vim /etc/yum.repos.d/local.repo

		[local]
		name=net_bendiyum
		baseurl=http://IP/centosiso/ 
		enabled=1
		gpgcheck=0

	5. 清除缓存
		yum clean all
		yum makecache
		yum repolist
	
```






















